diff -urN korundum-4.9.0/src/krubypluginfactory.cpp korundum-4.9.0-patched/src/krubypluginfactory.cpp
--- korundum-4.9.0/src/krubypluginfactory.cpp	2012-05-23 11:14:23.000000000 +1100
+++ korundum-4.9.0-patched/src/krubypluginfactory.cpp	2012-08-16 21:33:34.083135922 +1100
@@ -39,7 +39,6 @@
 extern "C" {
 extern VALUE rb_load_path;
 extern VALUE qt_internal_module;
-void Init_prelude(void);
 }
 
 //
@@ -165,7 +164,8 @@
 #if RUBY_VERSION >= 0x10900
     VALUE gem = rb_define_module("Gem");
     rb_const_set(gem, rb_intern("Enable"), Qtrue);
-    Init_prelude(); 
+    char *opts[] = { "ruby", "-e;" };
+    ruby_options(2, opts);
 #endif
 
     ruby_incpush(QFile::encodeName(program.path()));
@@ -342,7 +342,8 @@
 #if RUBY_VERSION >= 0x10900
     VALUE gem = rb_define_module("Gem");
     rb_const_set(gem, rb_intern("Enable"), Qtrue);
-    Init_prelude();                                             
+    char *opts[] = { "ruby", "-e;" };
+    ruby_options(2, opts);
 #endif
 
     ruby_incpush(QFile::encodeName(program.path()));
